import{player}from"../classes/player.js";import{camera,canvas,ctx,level,mapObjects}from"../variables/variables.js";import{objAudio}from"../variables/list-audio.js";import{renderingBlackout}from"../common/blackout.js";import{movingToNextLevel}from"../common/next-level.js";import{renderingNumberOfLivesBoss}from"../common/level-generation.js";import{renderingThirdLevel}from"./third-level.js";function renderingSecondLevel(){player.animationId=requestAnimationFrame(renderingSecondLevel),4e3<canvas.width?ctx.clearRect(camera.beginningMap.x-2e3,camera.beginningMap.y-2e3,Math.abs(camera.beginningMap.x)+Math.abs(camera.edgeOfMap.x)+4e3,Math.abs(camera.beginningMap.y)+Math.abs(camera.edgeOfMap.y)+4e3):ctx.clearRect(camera.beginningMap.x-1e3,camera.beginningMap.y-1e3,Math.abs(camera.beginningMap.x)+Math.abs(camera.edgeOfMap.x)+2e3,Math.abs(camera.beginningMap.y)+Math.abs(camera.edgeOfMap.y)+2e3),0===player.numberOfCompletedFrames&&(objAudio.effects[2].play(),objAudio.effects[2].addEventListener("ended",function(){mapObjects.UniversityInFlesh[0].stageOfFight="key phrases"},{once:!0})),0!==player.numberOfCompletedFrames&&player.numberOfCompletedFrames%7200!=0||(objAudio.soundsOfLocations[1].volume=.1,objAudio.soundsOfLocations[1].currentTime=0,objAudio.soundsOfLocations[1].play()),mapObjects.star.forEach(function(e){e.movement(canvas.width/2,canvas.height/2)}),mapObjects.floor.forEach(function(e){e.changePositions()}),mapObjects.UniversityInFlesh.forEach(function(e){e.changePositions()}),player.motionless(),player.numberOfCompletedFrames++,renderingBlackout("window"),renderingNumberOfLivesBoss("University"),("transitions"===mapObjects.UniversityInFlesh[0].previousStageOfFight||"key phrases"===mapObjects.UniversityInFlesh[0].previousStageOfFight&&0===mapObjects.UniversityInFlesh[0].stageOfKeyPhrase)&&mapObjects.UniversityInFlesh[0].showSkipText(),"victory"!==mapObjects.UniversityInFlesh[0].stageOfFight&&"defeat"!==mapObjects.UniversityInFlesh[0].stageOfFight||player.bossFightStage||(objAudio.soundsOfLocations[1].currentTime=0,objAudio.soundsOfLocations[1].pause(),level.currentLevel=3,movingToNextLevel(renderingThirdLevel,"long","Basements Of War",33,12))}export{renderingSecondLevel};