import{canvas,field,level,mapObjects}from"../variables/variables.js";import{player}from"../classes/player.js";import{ParticlePlayer,ParticleDemon,ParticleBlick}from"../classes/particles.js";import{objAudio}from"../variables/list-audio.js";function collisionWithPlayer(e,a){switch(e){case"water":for(var t=0,l=mapObjects.water;t<l.length;t++){var r=l[t];if(player.x+player.width+a.x>=r.x-.2*r.size&&player.x+a.x<=r.x+1.2*r.size&&player.y+2*player.height+a.y>=r.y-.1*r.size&&player.y+player.height/2+a.y<=r.y+r.size){player.permissionMovement=!1;break}}break;case"wall":for(var i=0,p=mapObjects.wall;i<p.length;i++){var s=p[i];if(player.x+player.width+a.x>=s.x&&player.x+a.x<=s.x+s.width&&player.y+player.height+a.y>=s.y+s.height/3&&player.y+3*player.height/4+a.y<=s.y+s.height){player.permissionMovement=!1;break}}break;case"cubicZirconia":for(var c=0,h=mapObjects.cubicZirconia;c<h.length;c++){var y=h[c];if("absent"!==y.condition&&player.x+player.width+a.x>=y.x&&player.x+a.x<=y.x+y.width&&player.y+player.width+a.y>=y.y+y.height/3&&player.y+player.width/2+a.y<=y.y+y.height){player.permissionMovement=!1;break}}break;case"tree":for(var b=0,o=mapObjects.tree;b<o.length;b++){var m=o[b];if(player.x+player.width+a.x>=m.treeX&&player.x+a.x<=m.treeX+m.width&&player.y+player.height+a.y>=m.treeY+.8*m.height&&player.y+player.height+a.y<=m.treeY+m.height){player.permissionMovement=!1;break}}break;case"tablet":for(var n=0,O=mapObjects.tablet;n<O.length;n++){var j=O[n];if(player.x+player.width+a.x>=j.tabletX+.1*j.size&&player.x+a.x<=j.tabletX+.9*j.size&&player.y+player.height+a.y>=j.tabletY+.8*j.size&&player.y+player.height+a.y<=j.tabletY+1.2*j.size){player.permissionMovement=!1;break}}break;case"fence":for(var d=0,g=mapObjects.fence;d<g.length;d++){var u=g[d];if(player.x+player.width+a.x>=u.fenceX+.1*u.width&&player.x+a.x<=u.fenceX+.9*u.width&&player.y+player.height+a.y>=u.fenceY+u.height-2*player.height/3&&player.y+2*player.height/3+a.y<=u.fenceY+u.height){player.permissionMovement=!1;break}}break;case"stage":for(var f=0;f<mapObjects.stage.length;f++)if(player.x+player.width>=mapObjects.stage[f].x&&player.x<=mapObjects.stage[f].x+mapObjects.stage[f].size&&player.y+player.height>=mapObjects.stage[f].y&&player.y<=mapObjects.stage[f].y+mapObjects.stage[f].size){player.numberOfCompletedFrames=0,level.levelStage=mapObjects.stage[f].stageThatWillBeInclude;for(var x=mapObjects.stage.length-1;0<=x;x--)mapObjects.stage[x].stageThatWillBeInclude===level.levelStage&&mapObjects.stage.splice(x,1);break}}}function collisionOfGameObjects(e,a){switch(e){case"bullet":switch(a){case"window":for(var t=0;t<mapObjects.bullet.length;t++)(mapObjects.bullet[t].x>=canvas.width||mapObjects.bullet[t].x+mapObjects.bullet[t].size<=0||mapObjects.bullet[t].y>=canvas.height||mapObjects.bullet[t].y+mapObjects.bullet[t].size<=0)&&150<mapObjects.bullet[t].lifeTime&&mapObjects.bullet.splice(t,1);break;case"tree":for(t=0;t<mapObjects.bullet.length;t++)for(var l=0,r=mapObjects.tree;l<r.length;l++){var i=r[l];if(mapObjects.bullet[t].x+mapObjects.bullet[t].size>=i.treeX&&mapObjects.bullet[t].x<=i.treeX+i.width&&mapObjects.bullet[t].y+mapObjects.bullet[t].size>=i.treeY+.8*i.height&&mapObjects.bullet[t].y+mapObjects.bullet[t].size<=i.treeY+i.height){mapObjects.bullet.splice(t,1);break}}}break;case"shell":switch(a){case"window":for(t=0;t<mapObjects.shell.length;t++)(mapObjects.shell[t].x>=canvas.width||mapObjects.shell[t].x+mapObjects.shell[t].size<=0||mapObjects.shell[t].y>=canvas.height||mapObjects.shell[t].y+mapObjects.shell[t].size<=0)&&mapObjects.shell.splice(t,1);break;case"cubicZirconia":for(t=0;t<mapObjects.shell.length;t++)for(var p=0,s=mapObjects.cubicZirconia;p<s.length;p++){var c=s[p];if(mapObjects.shell[t].x+mapObjects.shell[t].size>=c.x&&mapObjects.shell[t].x<=c.x+c.width&&mapObjects.shell[t].y+mapObjects.shell[t].size>=c.y+c.width/2&&mapObjects.shell[t].y<=c.y+c.height){mapObjects.shell.splice(t,1),objAudio.player[8].volume=.5,objAudio.player[8].currentTime=0,objAudio.player[8].play();break}}break;case"demon":for(t=0;t<mapObjects.shell.length;t++)for(var h=0;h<mapObjects.demon.length;h++)if(Math.hypot(mapObjects.shell[t].x+mapObjects.shell[t].startSize/2-mapObjects.demon[h].x,mapObjects.shell[t].y+mapObjects.shell[t].startSize/2-mapObjects.demon[h].y)<=mapObjects.shell[t].startSize/2+mapObjects.demon[h].startSize/2){mapObjects.demon[h].startSize-=.2*mapObjects.shell[t].startSize,mapObjects.demon[h].numberOfLives--;for(var y=0;y<10;y++)mapObjects.particlePlayer.push(new ParticlePlayer(mapObjects.shell[t].x,mapObjects.shell[t].y,Math.random()*field.sizeCell*.05));if(mapObjects.shell.splice(t,1),objAudio.player[8].volume=.5,objAudio.player[8].currentTime=0,objAudio.player[8].play(),0===mapObjects.demon[h].numberOfLives){for(y=0;y<20;y++)mapObjects.particleDemon.push(new ParticleDemon(mapObjects.demon[h].x,mapObjects.demon[h].y,Math.random()*field.sizeCell*.1));mapObjects.demon.splice(h,1),player.numberOfEnemiesKilled.demon++}break}break;case"CorruptedMadBlick":for(t=0;t<mapObjects.shell.length;t++)for(h=0;h<mapObjects.CorruptedMadBlick.length;h++)if(Math.hypot(mapObjects.shell[t].x+mapObjects.shell[t].startSize/2-mapObjects.CorruptedMadBlick[h].x,mapObjects.shell[t].y+mapObjects.shell[t].startSize/2-mapObjects.CorruptedMadBlick[h].y)<=mapObjects.shell[t].startSize/2+mapObjects.CorruptedMadBlick[h].startSize/2){if(mapObjects.CorruptedMadBlick[h].numberOfLives--,mapObjects.CorruptedMadBlick[h].numberOfLives<=0&&0===player.numberOfEnemiesKilled.CorruptedMadBlick){mapObjects.CorruptedMadBlick[h].numberOfLives=0;for(y=mapObjects.demon.length-1;0<=y;y--){for(var b=0;b<20;b++)mapObjects.particleDemon.push(new ParticleDemon(mapObjects.demon[y].x,mapObjects.demon[y].y,Math.random()*field.sizeCell*.1));mapObjects.demon.splice(y,1),player.numberOfEnemiesKilled.demon++}player.numberOfEnemiesKilled.CorruptedMadBlick++}for(y=0;y<10;y++)mapObjects.particlePlayer.push(new ParticlePlayer(mapObjects.shell[t].x,mapObjects.shell[t].y,Math.random()*field.sizeCell*.05));mapObjects.shell.splice(t,1),objAudio.player[8].volume=.5,objAudio.player[8].currentTime=0,objAudio.player[8].play();break}}break;case"shellBlick":if("window"===a)for(t=0;t<mapObjects.shellBlick.length;t++)(mapObjects.shellBlick[t].x>=canvas.width||mapObjects.shellBlick[t].x+mapObjects.shellBlick[t].size<=0||mapObjects.shellBlick[t].y>=canvas.height||mapObjects.shellBlick[t].y+mapObjects.shellBlick[t].size<=0)&&300<mapObjects.shellBlick[t].lifeTime&&mapObjects.shellBlick.splice(t,1);break;case"people":"wall"===a&&mapObjects.people.forEach(function(a){mapObjects.wall.forEach(function(e){a.x+a.height>=e.x&&a.x<=e.x+e.width&&a.peopleY+.5*a.height<=e.y+e.height&&a.peopleY>=e.y&&a.draw(),a.x>=e.x&&a.x+a.height<=e.x+e.width&&a.y+player.height>=e.y&&a.y+player.height<=e.y+e.height&&e.draw()})})}}function behindDetector(e){switch(e){case"item":mapObjects.item.forEach(function(a){player.x+player.width>=a.itemX&&player.x<=a.itemX+a.size&&player.y+player.height>=a.itemY&&player.y+player.height<=a.itemY+a.size&&(a.draw(),mapObjects.wall.forEach(function(e){a.itemX+a.size>=e.x&&a.itemX<=e.x+e.width&&a.itemY+a.size>=e.y&&a.itemY<=e.y+e.height&&e.draw()}))});break;case"wall":for(var a=0,t=mapObjects.wall;a<t.length;a++){var l=t[a];player.x+player.width>=l.x&&player.x<=l.x+l.width&&player.y+player.height<=l.y+l.height/3&&player.y+player.height>=l.y&&mapObjects.wall.forEach(function(e){e.draw()})}break;case"cubicZirconia":for(var r=0,i=mapObjects.cubicZirconia;r<i.length;r++){var p=i[r];player.x+player.width>=p.x&&player.x<=p.x+p.width&&player.y+player.height<=p.y+p.height/2&&player.y+player.height>=p.y&&mapObjects.cubicZirconia.forEach(function(e){e.draw()})}break;case"tree":for(var s=0,c=mapObjects.tree;s<c.length;s++){var h=c[s];if(player.x+player.width>=h.treeX-h.width&&player.x<h.treeX+2*h.width&&player.y+player.height>=h.treeY-h.width&&player.y+player.height<=h.treeY+h.height){mapObjects.tree.forEach(function(e){e.changePositions()});break}}break;case"tablet":for(var y=0,b=mapObjects.tablet;y<b.length;y++){var o=b[y];player.x+player.width>=o.tabletX&&player.x<=o.tabletX+o.size&&player.y+player.height>=o.tabletY&&player.y+player.height<=o.tabletY+o.size&&o.draw()}break;case"interlocutor":for(var m=0,n=mapObjects.npc.interlocutor;m<n.length;m++){var O=n[m];if(player.x+player.width>=O.x&&player.x<O.x+O.width&&player.y+player.height>=O.y&&player.y+player.height<=O.y+O.height){mapObjects.npc.interlocutor.forEach(function(e){e.changePositions()});break}}break;case"wounded":for(var j=0,d=mapObjects.npc.wounded;j<d.length;j++){O=d[j];if(player.x+player.width>=O.x&&player.x<O.x+O.width&&player.y+player.height>=O.y&&player.y+player.height<=O.y+O.height){mapObjects.npc.wounded.forEach(function(e){e.changePositions()});break}}break;case"lera":for(var g=0,u=mapObjects.npc.lera;g<u.length;g++){O=u[g];if(player.x+player.width>=O.x&&player.x<O.x+O.width&&player.y+player.height>=O.y&&player.y+player.height<=O.y+O.height){mapObjects.npc.lera.forEach(function(e){e.changePositions()});break}}break;case"people":mapObjects.people.forEach(function(a){player.x+player.width>=a.peopleX&&player.x<=a.peopleX+a.width&&player.y+player.height>=a.peopleY&&player.y+player.height<=a.peopleY+a.height&&(a.changePositions(),mapObjects.wall.forEach(function(e){a.x>=e.x&&a.x+a.height<=e.x+e.width&&a.y+player.height>=e.y&&a.y+player.height<=e.y+e.height&&e.draw()}))});break;case"fence":for(var f=0,x=mapObjects.fence;f<x.length;f++){var w=x[f];player.x+player.width>=w.fenceX+.1*w.width&&player.x<=w.fenceX+.9*w.width&&player.y+player.height>=w.fenceY&&player.y+player.height<=w.fenceY+w.height&&mapObjects.fence.forEach(function(e){e.draw()})}break;case"soul":for(var k=0,v=mapObjects.soul;k<v.length;k++){var z=v[k];player.x+player.width>=z.x&&player.x<=z.x+2*z.radius&&player.y+player.height<=z.y+2*z.radius&&player.y+player.height>=z.y&&z.drawStationary()}}}function interaction(e){switch(e){case"tablet":for(var a=0,t=mapObjects.tablet;a<t.length;a++){var l=t[a];if(player.x+player.width>=l.tabletX-l.size/2&&player.x<=l.tabletX+1.5*l.size&&player.y+player.height>=l.tabletY+l.size/2&&player.y+player.height<=l.tabletY+1.5*l.size){l.showText(),l.toggleHint(),l.showHint();break}}break;case"item":mapObjects.item.forEach(function(e,a){player.x+player.width>=e.itemX-e.size&&player.x<=e.itemX+2*e.size&&player.y+player.height>=e.itemY&&player.y+player.height<=e.itemY+2*e.size&&(e.showHint(),e.pickUp(a))});break;case"interlocutor":mapObjects.npc.interlocutor.forEach(function(e){player.x+player.width>=e.x-e.width&&player.x<=e.x+2*e.width&&player.y+player.height>=e.y+e.height-e.width&&player.y+player.height<=e.y+e.height+e.width&&(e.showHint(),e.startDialog())});break;case"wounded":mapObjects.npc.wounded.forEach(function(e){player.x+player.width>=e.x-e.width&&player.x<=e.x+2*e.width&&player.y+player.height>=e.y+e.height-e.width&&player.y+player.height<=e.y+e.height+e.width&&(e.showHint(),e.heals(),e.startDialog())});break;case"lera":mapObjects.npc.lera.forEach(function(e){player.x+player.width>=e.x-e.width&&player.x<=e.x+2*e.width&&player.y+player.height>=e.y+e.height-e.width&&player.y+player.height<=e.y+e.height+e.width&&(e.showHint(),e.startDialog(),e.gettingHit())});break;case"soul":mapObjects.soul.forEach(function(e){player.x+player.width>=e.x-2*e.radius&&player.x<=e.x+4*e.radius&&player.y+player.height<=e.y+4*e.radius&&player.y+player.height>=e.y&&(e.showHint(),e.startDialog())})}}function takingDamage(e){switch(e){case"bullet":for(var a=0;a<mapObjects.bullet.length;a++)if(mapObjects.bullet[a].x+mapObjects.bullet[a].size>=player.x&&mapObjects.bullet[a].x<=player.x+player.width&&mapObjects.bullet[a].y+mapObjects.bullet[a].size>=player.y+2*mapObjects.bullet[a].size&&mapObjects.bullet[a].y<=player.y+player.height-2*mapObjects.bullet[a].size){player.numberOfLives-=100;break}break;case"cubicZirconia":for(a=0;a<mapObjects.cubicZirconia.length;a++){if("aggressive"===mapObjects.cubicZirconia[a].condition&&player.x+player.width>=mapObjects.cubicZirconia[a].x-.2*mapObjects.cubicZirconia[a].width&&player.x<=mapObjects.cubicZirconia[a].x+1.2*mapObjects.cubicZirconia[a].width&&player.y+player.width>=mapObjects.cubicZirconia[a].y+mapObjects.cubicZirconia[a].height/3-.2*mapObjects.cubicZirconia[a].width&&player.y+player.width/2<=mapObjects.cubicZirconia[a].y+mapObjects.cubicZirconia[a].height+.2*mapObjects.cubicZirconia[a].width&&!level.safeZone){player.numberOfLives-=.05,player.numberOfLives<0&&(player.numberOfLives=0),player.takesDamage=!0,player.color="#8932E0",player.transparentColor="rgba(137,50,224,0)",mapObjects.playerSimulator.forEach(function(e){e.color="137, 50, 224"});break}a===mapObjects.cubicZirconia.length-1&&(player.color="#e0329a",player.transparentColor="rgba(224,50,154,0)",mapObjects.playerSimulator.forEach(function(e){e.color="224, 50, 154"}))}break;case"demon":for(a=0;a<mapObjects.demon.length;a++){if(Math.hypot(player.x+.5*player.width-mapObjects.demon[a].x,player.y+.5*player.width-mapObjects.demon[a].y)<=.5*player.width+.5*mapObjects.demon[a].startSize&&!level.safeZone){player.numberOfLives-=.5,player.numberOfLives<0&&(player.numberOfLives=0),player.takesDamage=!0,player.color="#8932E0",player.transparentColor="rgba(137,50,224,0)",mapObjects.playerSimulator.forEach(function(e){e.color="137, 50, 224"});break}a===mapObjects.cubicZirconia.length-1&&(player.color="#e0329a",player.transparentColor="rgba(224,50,154,0)",mapObjects.playerSimulator.forEach(function(e){e.color="224, 50, 154"}))}break;case"CorruptedMadBlick":for(var t=0,l=mapObjects.CorruptedMadBlick;t<l.length;t++){var r=l[t];Math.hypot(player.x+.5*player.width-r.x,player.y+.5*player.width-r.y)<=.5*player.width+.5*r.startSize&&player.bossFightStage&&(player.numberOfLives-=100,player.numberOfLives<0&&(player.numberOfLives=0),player.color="#6500C9",player.transparentColor="rgba(101, 0, 201, 0)",mapObjects.playerSimulator.forEach(function(e){e.color="101, 0, 201"}))}break;case"shellBlick":for(a=0;a<mapObjects.shellBlick.length;a++)if(Math.hypot(player.x+.5*player.width-mapObjects.shellBlick[a].x+mapObjects.shellBlick[a].size/2,player.y+.5*player.width-mapObjects.shellBlick[a].y+mapObjects.shellBlick[a].size/2)<=.5*player.width+.5*mapObjects.shellBlick[a].size){player.numberOfLives-=20,player.numberOfLives<0&&(player.numberOfLives=0),player.takesDamage=!0;for(var i=0;i<10;i++)mapObjects.particleBlick.push(new ParticleBlick(mapObjects.shellBlick[a].x,mapObjects.shellBlick[a].y,Math.random()*field.sizeCell*.05));mapObjects.shellBlick.splice(a,1),objAudio.player[8].volume=.5,objAudio.player[8].currentTime=0,objAudio.player[8].play()}}}export{collisionWithPlayer,collisionOfGameObjects,behindDetector,interaction,takingDamage};