var __extends=this&&this.__extends||function(){var s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();import{TemplateCell}from"./template.js";import{ctx,field,keys,mapObjects,camera}from"../variables/variables.js";import{player}from"./player.js";var Item=function(r){function t(t,e,i,s){t=r.call(this,t,e,i)||this;return t.positioningError=Math.random()*field.sizeCell*3/4,t.image=new Image,t.startX=t.x-5,t.startY=t.y-5,t.image.src="./images/items/items.png",t.typeImage=parseInt(s),t}return __extends(t,r),t.prototype.draw=function(){ctx.drawImage(this.image,100*this.typeImage,0,100,100,this.itemX,this.itemY,this.size,this.size)},t.prototype.changePositions=function(){this.x=this.startX+(camera.currentPosition.startX-camera.currentPosition.x),this.y=this.startY+(camera.currentPosition.startY-camera.currentPosition.y),this.itemX=this.x+this.positioningError,this.itemY=this.y+this.positioningError,this.draw()},t.prototype.showHint=function(){keys.f.pause||(ctx.fillStyle="rgba(0,0,0,.5)",ctx.fillRect(this.itemX-2*this.size,this.itemY-this.size,5*this.size,this.size/2),ctx.fillStyle="white",ctx.font="900 ".concat(field.sizeCell/13,"px Pixel Art"),ctx.textBaseline="middle",ctx.textAlign="center",ctx.fillText('жмякни "а", чтобы подобрать',this.itemX+this.size/2,this.itemY-.75*this.size))},t.prototype.pickUp=function(t){keys.f.pressed&&!keys.f.pause&&(player.audio.pickUp.currentTime=0,player.audio.pickUp.play(),player.playerTasks.backpack.push("i".concat(this.typeImage)),mapObjects.item.splice(t,1))},t}(TemplateCell);export{Item};