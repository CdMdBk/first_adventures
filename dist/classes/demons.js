var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,i){t.__proto__=i}:function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}))(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();import{camera,canvas,ctx,field,level,mapObjects}from"../variables/variables.js";import{player}from"./player.js";import{TemplateCell}from"./template.js";import{ParticleDeadBlick}from"./particles.js";import{objAudio}from"../variables/list-audio.js";var Demon=function(){function t(t){this.numberOfLives=3,this.color="137, 50, 224",this.opacity=1,this.shadowX=0,this.shadowY=0,this.constSpeed=canvas.height/40*.08,this.size=t,this.startSize=this.size,Math.floor(2*Math.random())%2==0?(Math.floor(2*Math.random())%2==0?this.x=canvas.width+2*this.size:this.x=2*-this.size,this.y=Math.random()*(canvas.height+2*this.size)-2*this.size):(Math.floor(2*Math.random())%2==0?this.y=canvas.height+2*this.size:this.y=2*-this.size,this.x=Math.random()*(canvas.width+2*this.size)-2*this.size),this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y}return t.prototype.draw=function(){for(;0<this.opacity;)this.colorGradient=ctx.createRadialGradient(this.x-this.shadowX,this.y-this.shadowY,this.size/4,this.x-this.shadowX,this.y-this.shadowY,.6*this.size),this.colorGradient.addColorStop(.8,"rgb(".concat(this.color,", ").concat(this.opacity,")")),this.colorGradient.addColorStop(1,"rgba(".concat(this.color,", 0)")),ctx.fillStyle=this.colorGradient,ctx.fillRect(this.x-this.startSize-this.shadowX-this.startSize/2,this.y-this.startSize-this.shadowX-this.startSize/2,3*this.startSize,3*this.startSize),this.shadowX+=this.speedX*this.cos*4,this.shadowY+=this.speedY*this.sin*4,this.opacity-=.1,4<this.size&&(this.size-=4);this.shadowX=0,this.shadowY=0,this.opacity=1,this.size=this.startSize},t.prototype.changePositions=function(){this.x<=player.x+.5*player.width?this.speedX=this.constSpeed:this.speedX=-this.constSpeed,this.y<=player.y+.5*player.width?this.speedY=this.constSpeed:this.speedY=-this.constSpeed,this.hypot=Math.abs(Math.hypot(this.x-player.x-.5*player.width,this.y-player.y-.5*player.width)),this.sin=Math.abs((this.y-player.y-.5*player.width)/this.hypot),this.cos=Math.abs((this.x-player.x-.5*player.width)/this.hypot),this.x+=this.cos*this.speedX+(this.currentPositionX-camera.currentPosition.x),this.y+=this.sin*this.speedY+(this.currentPositionY-camera.currentPosition.y),this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y,this.shadowX=0,this.shadowY=0,this.opacity=1,this.size=this.startSize,this.draw()},t}(),CorruptedMadBlick=function(){function t(t){this.numberOfLives=100,this.maxLives=100,this.color="101, 0, 201",this.opacity=1,this.shadowX=0,this.shadowY=0,this.constSpeed=canvas.height/40*.06,this.size=t,this.startSize=this.size,Math.floor(2*Math.random())%2==0?(Math.floor(2*Math.random())%2==0?this.x=canvas.width+2*this.size:this.x=2*-this.size,this.y=Math.random()*(canvas.height+2*this.size)-2*this.size):(Math.floor(2*Math.random())%2==0?this.y=canvas.height+2*this.size:this.y=2*-this.size,this.x=Math.random()*(canvas.width+2*this.size)-2*this.size),this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y}return t.prototype.drawMove=function(){for(;0<this.opacity;)this.colorGradient=ctx.createRadialGradient(this.x-this.shadowX,this.y-this.shadowY,this.size/4,this.x-this.shadowX,this.y-this.shadowY,.6*this.size),this.colorGradient.addColorStop(.8,"rgb(".concat(this.color,", ").concat(this.opacity,")")),this.colorGradient.addColorStop(1,"rgba(".concat(this.color,", 0)")),ctx.fillStyle=this.colorGradient,ctx.fillRect(this.x-this.startSize-this.shadowX-this.startSize/2,this.y-this.startSize-this.shadowX-this.startSize/2,3*this.startSize,3*this.startSize),this.shadowX+=this.speedX*this.cos*10,this.shadowY+=this.speedY*this.sin*10,this.opacity-=.1,10<this.size&&(this.size-=10);this.shadowX=0,this.shadowY=0,this.opacity=1,this.size=this.startSize},t.prototype.drawStationaryState=function(){this.colorGradient=ctx.createRadialGradient(this.x,this.y,this.size/4,this.x,this.y,.6*this.size),this.colorGradient.addColorStop(.8,"rgb(".concat(this.color,", ").concat(this.opacity,")")),this.colorGradient.addColorStop(1,"rgba(".concat(this.color,", 0)")),ctx.fillStyle=this.colorGradient,ctx.fillRect(this.x-this.startSize-this.startSize/2,this.y-this.startSize-this.startSize/2,3*this.startSize,3*this.startSize)},t.prototype.changePositions=function(){0<this.numberOfLives?(this.x<=player.x+.5*player.width?this.speedX=this.constSpeed:this.speedX=-this.constSpeed,this.y<=player.y+.5*player.width?this.speedY=this.constSpeed:this.speedY=-this.constSpeed,this.hypot=Math.abs(Math.hypot(this.x-player.x-.5*player.width,this.y-player.y-.5*player.width)),this.sin=Math.abs((this.y-player.y-.5*player.width)/this.hypot),this.cos=Math.abs((this.x-player.x-.5*player.width)/this.hypot),this.x+=this.cos*this.speedX+(this.currentPositionX-camera.currentPosition.x),this.y+=this.sin*this.speedY+(this.currentPositionY-camera.currentPosition.y),this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y,this.drawMove(),player.numberOfCompletedFrames%100==0&&(mapObjects.shellBlick.push(new ShellBlick(this.x-this.startSize/2,this.y-this.startSize/2,field.sizeCell/8,this.startSize)),objAudio.player[7].volume=.5,objAudio.player[7].currentTime=0,objAudio.player[7].play())):(this.numberOfLives=0,this.x+=this.currentPositionX-camera.currentPosition.x,this.y+=this.currentPositionY-camera.currentPosition.y,this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y,this.size>.3*field.sizeCell?this.size-=.2:(player.bossFightStage=!1,level.safeZone=!0),this.drawStationaryState(),mapObjects.particleDeadBlick.push(new ParticleDeadBlick(this.x,this.y,field.sizeCell)))},t}(),ShellBlick=function(h){function t(t,i,s,e){t=h.call(this,t,i,s)||this;return t.lifeTime=0,t.color="101, 0, 201",t.opacity=1,t.shadowX=0,t.shadowY=0,t.numberOfShadows=5,t.constSpeed=canvas.height/40*.25,t.startSize=t.size,t.x+=e/2-t.size/2,t.y+=e/2-t.size/2,t.startX=t.x,t.startY=t.y,t.targetX=player.x+.5*player.width,t.targetY=player.y+.5*player.width,t.currentPositionX=camera.currentPosition.x,t.currentPositionY=camera.currentPosition.y,t.x<t.targetX?t.speedX=t.constSpeed:t.speedX=-t.constSpeed,t.y<t.targetY?t.speedY=t.constSpeed:t.speedY=-t.constSpeed,t.hypot=Math.abs(Math.hypot(t.startX-t.targetX,t.startY-t.targetY)),t.sin=Math.abs((t.startY-t.targetY)/t.hypot),t.cos=Math.abs((t.startX-t.targetX)/t.hypot),t}return __extends(t,h),t.prototype.draw=function(){for(var t=0;t<this.numberOfShadows;t++)ctx.beginPath(),ctx.arc(this.x+this.size/2-this.shadowX,this.y+.5*this.size-this.shadowY,.5*this.size,0,2*Math.PI,!1),ctx.fillStyle="rgba(".concat(this.color,", ").concat(this.opacity,")"),ctx.fill(),ctx.closePath(),this.shadowX+=this.speedX*this.cos,this.shadowY+=this.speedY*this.sin,this.opacity-=.1,--this.size},t.prototype.changePositions=function(){this.x+=this.cos*this.speedX+(this.currentPositionX-camera.currentPosition.x),this.y+=this.sin*this.speedY+(this.currentPositionY-camera.currentPosition.y),this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y,this.lifeTime++,this.shadowX=0,this.shadowY=0,this.opacity=1,this.size=this.startSize,player.numberOfCompletedFrames%10==0&&this.numberOfShadows<10&&this.numberOfShadows++,this.draw()},t}(TemplateCell);export{Demon,CorruptedMadBlick,ShellBlick};