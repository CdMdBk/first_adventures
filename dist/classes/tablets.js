var __extends=this&&this.__extends||function(){var s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();import{TemplateCell}from"./template.js";import{canvas,ctx,field,keys,camera}from"../variables/variables.js";import{player}from"./player.js";var Tablet=function(r){function t(t,e,i,s,n,a){t=r.call(this,t,e,i)||this;return t.hintIsActive=!1,t.lineHeight=field.sizeCell/13,t.image=new Image,t.imageHint=new Image,t.startX=t.x-5,t.startY=t.y-5,t.image.src=n,t.imageHint.src=a,t.hint=s,t}return __extends(t,r),t.prototype.draw=function(){ctx.drawImage(this.image,this.tabletX,this.tabletY,this.size,this.size)},t.prototype.changePositions=function(){this.x=this.startX+(camera.currentPosition.startX-camera.currentPosition.x),this.y=this.startY+(camera.currentPosition.startY-camera.currentPosition.y),this.tabletX=this.x+this.size/6,this.tabletY=this.y+this.size/6,this.draw()},t.prototype.showText=function(){player.thinks||(ctx.fillStyle="rgba(0,0,0,.5)",ctx.fillRect(this.tabletX-this.size/2,this.tabletY-this.size/4,2*this.size,this.size/4),ctx.fillStyle="white",ctx.font="900 ".concat(field.sizeCell/13,"px Pixel Art"),ctx.textBaseline="middle",ctx.textAlign="center",ctx.fillText('жмякни "а", чтобы прочитать',this.tabletX+this.size/2,this.tabletY-this.size/8))},t.prototype.toggleHint=function(){keys.f.pressed&&!keys.f.pause&&(player.audio.openTablet.currentTime=0,player.audio.openTablet.play(),this.hintIsActive?this.hintIsActive=!1:this.hintIsActive=!0,keys.f.pause=!0,player.thinks?player.thinks=!1:player.thinks=!0,setTimeout(function(){keys.f.pause=!1},500))},t.prototype.showHint=function(){this.hintIsActive&&(ctx.drawImage(this.imageHint,canvas.width/4,canvas.height/4,canvas.width/2,canvas.height/2),ctx.fillStyle="#2C1208",ctx.font="900 ".concat(field.sizeCell/8,"px Pixel Art"),this.lineHeight=field.sizeCell/8,ctx.textBaseline="middle",ctx.textAlign="center",this.drawText())},t.prototype.drawText=function(){var i=this;this.hint.split("\n").forEach(function(t,e){ctx.fillText(t,canvas.width/2,canvas.height/2+(e-3)*i.lineHeight)})},t}(TemplateCell);export{Tablet};