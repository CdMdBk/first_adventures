var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,i){t.__proto__=i}:function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}))(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();import{TemplateCell}from"./template.js";import{camera,canvas,ctx,field,mapObjects}from"../variables/variables.js";import{player}from"./player.js";import{objAudio}from"../variables/list-audio.js";var Target=function(e){function t(t,i,s){t=e.call(this,t,i,s)||this;return t.startX=t.x-5,t.startY=t.y-5,t}return __extends(t,e),t.prototype.changePositions=function(){var t=this;this.x=this.startX+(camera.currentPosition.startX-camera.currentPosition.x),this.y=this.startY+(camera.currentPosition.startY-camera.currentPosition.y),0<=this.x&&this.x+this.size<=canvas.width&&0<=this.y&&this.y+this.size<=canvas.height&&player.numberOfCompletedFrames%300==0&&(objAudio.effects[3].play(),setTimeout(function(){mapObjects.bullet.push(new Bullet(field.sizeCell/10,t.x,t.y))},400))},t}(TemplateCell),Bullet=function(){function t(t,i,s){this.image=new Image,this.lifeTime=0,this.constSpeed=canvas.height/40*.3,this.size=t,Math.floor(2*Math.random())%2==0?(Math.floor(2*Math.random())%2==0?this.x=canvas.width+2*this.size:this.x=2*-this.size,this.y=Math.random()*(canvas.height+2*this.size)-2*this.size):(Math.floor(2*Math.random())%2==0?this.y=canvas.height+2*this.size:this.y=2*-this.size,this.x=Math.random()*(canvas.width+2*this.size)-2*this.size),this.startX=this.x,this.startY=this.y,this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y,this.targetX=i,this.targetY=s,this.x<i?this.speedX=this.constSpeed:this.speedX=-this.constSpeed,this.y<s?this.speedY=this.constSpeed:this.speedY=-this.constSpeed,this.hypot=Math.abs(Math.hypot(this.startX-this.targetX,this.startY-this.targetY)),this.sin=Math.abs((this.startY-this.targetY)/this.hypot),this.cos=Math.abs((this.startX-this.targetX)/this.hypot),this.image.src="./images/bullet/bullet.png"}return t.prototype.draw=function(){ctx.drawImage(this.image,this.x,this.y,this.size,this.size)},t.prototype.changePositions=function(){this.x+=this.cos*this.speedX+(this.currentPositionX-camera.currentPosition.x),this.y+=this.sin*this.speedY+(this.currentPositionY-camera.currentPosition.y),this.currentPositionX=camera.currentPosition.x,this.currentPositionY=camera.currentPosition.y,this.lifeTime++,this.draw()},t}();export{Target,Bullet};